"use client";

import { useMemo, useState } from "react";
import { ChevronDown } from "lucide-react";

type FAQItem = {
  q: string;
  a: string;
};

function openExternal(url: string) {
  // âœ… ìƒˆ ì°½ ì—´ê¸°(ëŒ€ë¶€ë¶„ í™˜ê²½ì—ì„œ ê°€ì¥ ì•ˆì •ì )
  const win = window.open(url, "_blank", "noopener,noreferrer");

  // âœ… ì¸ì•± ë¸Œë¼ìš°ì € ë“±ì—ì„œ ìƒˆ ì°½ì´ ë§‰í ê²½ìš° fallback
  if (!win) {
    window.location.href = url;
  }
}

export default function FAQSection() {
  const [open, setOpen] = useState<number | null>(0);

  // âœ… í•˜ë‹¨ ë°°ë„ˆì™€ ë™ì¼í•˜ê²Œ /chat ì‚¬ìš©
  const KAKAO_CHAT_URL = "https://pf.kakao.com/_GVuxin/chat";

  const faqs: FAQItem[] = useMemo(
    () => [
      {
        q: "ìˆ˜ì—…ì€ ì–´ë–¤ ìˆœì„œë¡œ ì§„í–‰ë˜ë‚˜ìš”?",
        a: `í”¼í‹°ì•³í™ˆì€ ë‹¨ìˆœí•œ ìš´ë™ ì§€ë„ê°€ ì•„ë‹ˆë¼, íšŒì›ë‹˜ì˜ ëª©í‘œì™€ ìƒíƒœì— ë§ì¶˜ ê°œì¸ ë£¨í‹´ ì„¤ê³„ ê³¼ì •ìœ¼ë¡œ ìš´ì˜ë©ë‹ˆë‹¤.

1ï¸âƒ£ ìˆ˜ì—… ì‹ ì²­ ë° ì‚¬ì „ ì •ë³´ ì œê³µ â€” ìš´ë™ ëª©í‘œ, ë¶ˆí¸ ë¶€ìœ„, í¬ë§ ìš”ì¼ ë“± ê¸°ë³¸ ì •ë³´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.
2ï¸âƒ£ ì „ë¬¸ ì½”ì¹˜ ë§¤ì¹­ â€” ì‚¬ì „ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë‹´ë‹¹ íŠ¸ë ˆì´ë„ˆê°€ ë°°ì •ë©ë‹ˆë‹¤.
3ï¸âƒ£ ì¼ì • í™•ì • â€” ë‹´ë‹¹ íŠ¸ë ˆì´ë„ˆê°€ ì§ì ‘ ì—°ë½ë“œë ¤ ìˆ˜ì—… ì¼ì •ì„ í™•ì •í•©ë‹ˆë‹¤.
4ï¸âƒ£ ì²« ë°©ë¬¸ ìˆ˜ì—… â€” ê³µê°„Â·ì²´í˜•Â·ëª©í‘œë¥¼ í•¨ê»˜ ì ê²€í•˜ê³  ë§ì¶¤ ë£¨í‹´ì„ ì„¤ê³„í•©ë‹ˆë‹¤.
5ï¸âƒ£ í”¼ë“œë°± ë° ì¼ì • ì¡°ìœ¨ â€” ìˆ˜ì—… ì¢…ë£Œ í›„ í”¼ë“œë°±ê³¼ ë‹¤ìŒ ì¼ì •ì´ ì¡°ì •ë©ë‹ˆë‹¤.

ğŸ©¶ ì´ë ‡ê²Œ ë§¤ ì„¸ì…˜ì´ ëˆ„ì ë˜ë©°, â€˜ë‚˜ì—ê²Œ ë§ëŠ” ë£¨í‹´ì´ ì™„ì„±ë˜ëŠ” ê³¼ì •â€™ìœ¼ë¡œ ë°œì „í•©ë‹ˆë‹¤.`,
      },
      {
        q: "ì–´ë–¤ ìš´ë™ ë„êµ¬ê°€ ì œê³µë˜ë‚˜ìš”?",
        a: `ëª¨ë“  íŠ¸ë ˆì´ë„ˆëŠ” ì „ìš© ì´ë™ ì¥ë¹„ ì„¸íŠ¸ë¥¼ íœ´ëŒ€í•˜ê³  ë°©ë¬¸í•©ë‹ˆë‹¤.

ì œê³µë˜ëŠ” ë„êµ¬ëŠ” ë§ˆì‚¬ì§€ ë² ë“œ, ë¤ë²¨, ì¼€í‹€ë²¨, ë°”ë²¨, ë°´ë“œë¥˜, í† ë‹ë³¼, ë°¸ëŸ°ìŠ¤íŒ¨ë“œ ë“±ì´ë©°,
ê³µê°„ ìƒí™©ì— ë”°ë¼ í•„ìš”í•œ ì¥ë¹„ë§Œ ì„ íƒì ìœ¼ë¡œ ì„¸íŒ…ë©ë‹ˆë‹¤.

ğŸ©¶ íšŒì›ë‹˜ì€ ë³„ë„ ì¤€ë¹„ ì—†ì´, ì§‘ ì•ˆì—ì„œ ì™„ì „í•œ íŠ¸ë ˆì´ë‹ í™˜ê²½ì„ ê²½í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
      },
      {
        q: "ìˆ˜ì—… ì¼ì •ì€ ì–´ë–»ê²Œ ì¡°ìœ¨í•˜ë‚˜ìš”?",
        a: `ëª¨ë“  ì¼ì • ì¡°ìœ¨ì€ ë‹´ë‹¹ íŠ¸ë ˆì´ë„ˆì™€ì˜ 1:1 ì—°ë½ì„ í†µí•´ ì§„í–‰ë©ë‹ˆë‹¤.

ë³µì¡í•œ ì˜ˆì•½ ì‹œìŠ¤í…œ ì—†ì´ ì¹´ì¹´ì˜¤í†¡ ë˜ëŠ” ì „í™”ë¡œ ì§ì ‘ ì†Œí†µí•˜ë©° ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ©¶ í”¼í‹°ì•³í™ˆì€ ê³ ê°ì˜ ì¼ì • ë³€í™”ì— ìœ ì—°í•˜ê²Œ ëŒ€ì‘í•˜ëŠ” êµ¬ì¡°ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.`,
      },
      {
        q: "íŠ¸ë ˆì´ë„ˆ ë°°ì •ì€ ì–´ë–»ê²Œ ì§„í–‰ë˜ë‚˜ìš”?",
        a: `í”¼í‹°ì•³í™ˆì€ íŠ¸ë ˆì´ë„ˆ ë°°ì •ì„ ë‹¨ìˆœí•œ ìŠ¤ì¼€ì¤„ ë§¤ì¹­ì´ ì•„ë‹Œ ì „ë¬¸ì„± ê¸°ë°˜ì˜ íë ˆì´ì…˜ ê³¼ì •ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.

1ï¸âƒ£ ì‚¬ì „ ìƒë‹´ì„ í†µí•´ ìš´ë™ ëª©ì ê³¼ ì‹ ì²´ ìƒíƒœë¥¼ íŒŒì•…í•©ë‹ˆë‹¤.
2ï¸âƒ£ ë‚´ë¶€ ì‹œìŠ¤í…œì—ì„œ ê°€ì¥ ì í•©í•œ ì „ê³µÂ·ê²½ë ¥ íŠ¸ë ˆì´ë„ˆë¥¼ ì„ ë³„í•©ë‹ˆë‹¤.
3ï¸âƒ£ íŠ¸ë ˆì´ë„ˆì˜ ê²½ë ¥ê³¼ ìê²©ì‚¬í•­ì´ í¬í•¨ëœ í”„ë¡œí•„ì„ íšŒì›ë‹˜ê»˜ ì œê³µí•˜ê³ , ìŠ¹ì¸ í›„ ì¼ì •ì´ í™•ì •ë©ë‹ˆë‹¤.

ğŸ©¶ í”¼í‹°ì•³í™ˆì€ â€˜ì•„ë¬´ ì½”ì¹˜ë‚˜ ì˜¤ëŠ” ì„œë¹„ìŠ¤â€™ê°€ ì•„ë‹ˆë¼, ëª©í‘œì™€ ìƒí™©ì— ìµœì í™”ëœ íŠ¸ë ˆì´ë„ˆ ë§¤ì¹­ ì‹œìŠ¤í…œì„ ìš´ì˜í•©ë‹ˆë‹¤.`,
      },
      {
        q: "ì–´ë–¤ í”„ë¡œê·¸ë¨ì„ ë°›ì„ ìˆ˜ ìˆë‚˜ìš”?",
        a: `í”¼í‹°ì•³í™ˆì€ ìš´ë™ ëª©ì ì— ë”°ë¥¸ ì„¸ë¶„í™”ëœ í”„ë¡œê·¸ë¨ì„ ì œê³µí•©ë‹ˆë‹¤.

- ì²´í˜• êµì • / ë°”ë¥¸ ìì„¸ ë£¨í‹´
- ë‹¤ì´ì–´íŠ¸ ë° ì²´ì¤‘ ê°ëŸ‰ ë£¨í‹´
- ê·¼ë ¥Â·ê·¼ì§€êµ¬ë ¥ ê°•í™” í”„ë¡œê·¸ë¨
- ì»¨ë””ì…”ë‹ ë° í”¼ë¡œ íšŒë³µ ê´€ë¦¬
- ì‚°ì „Â·ì‚°í›„ ì¼€ì–´ ë° ì¬í™œ í”„ë¡œê·¸ë¨

ğŸ©¶ ëª¨ë“  í”„ë¡œê·¸ë¨ì€ íšŒì›ì˜ ì‹ ì²´ ì¡°ê±´, íšŒë³µ ì†ë„, ìƒí™œ íŒ¨í„´ì— ë§ê²Œ ì»¤ìŠ¤í„°ë§ˆì´ì§•ë˜ì–´ ì§„í–‰ë©ë‹ˆë‹¤.`,
      },
      {
        q: "ìš´ë™ ì¤‘ í†µì¦ì´ë‚˜ ë¶€ìƒì´ ìƒê¸°ë©´ ì–´ë–»ê²Œ í•˜ë‚˜ìš”?",
        a: `í”¼í‹°ì•³í™ˆì€ ë‹¨ìˆœí•œ â€˜ìš´ë™ ì§€ë„ ì„œë¹„ìŠ¤â€™ê°€ ì•„ë‹ˆë¼, ë¶€ìƒ ì˜ˆë°©ë¶€í„° íšŒë³µê¹Œì§€ ì•„ìš°ë¥´ëŠ” ì „ë¬¸ í”¼ì§€ì»¬ ì¼€ì–´ ì‹œìŠ¤í…œì„ ìš´ì˜í•©ë‹ˆë‹¤.

1ï¸âƒ£ ëª¨ë“  íŠ¸ë ˆì´ë„ˆëŠ” í•œêµ­ì²´ìœ¡ëŒ€í•™êµ ìš´ë™ê±´ê°•ê´€ë¦¬í•™ê³¼ ì¶œì‹  ë° êµ­ê°€ê³µì¸ ìê²©ì¦(ìš´ë™ì²˜ë°©ì‚¬Â·ê±´ê°•ìš´ë™ê´€ë¦¬ì‚¬ ë“±) ë³´ìœ ìë¡œ,
ê·¼ê³¨ê²©ê³„ í†µì¦ê³¼ ì¬í™œ ë‹¨ê³„ë³„ ì ‘ê·¼ë²•ì— ëŒ€í•œ ì „ë¬¸ êµìœ¡ì„ ì´ìˆ˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.

2ï¸âƒ£ ìˆ˜ì—… ì¤‘ í†µì¦ì´ ë°œìƒí•  ê²½ìš°, ì¦‰ì‹œ ì„¸ì…˜ì„ ì¤‘ë‹¨í•˜ê³  í†µì¦ ì›ì¸ì„ í‰ê°€í•œ ë’¤ í•´ë‹¹ ë¶€ìœ„ì— ë§ëŠ” ì•ˆì •í™”Â·ê°€ë™ì„± íšŒë³µ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤.

3ï¸âƒ£ ê³¼ê±° ë¶€ìƒ ì´ë ¥ì´ë‚˜ ì§ˆí™˜ì´ ìˆëŠ” íšŒì›ì€ ì´ˆê¸° ìƒë‹´ ì‹œ ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ â€˜ë§ì¶¤ íšŒë³µ ë£¨í‹´â€™ì„ ë³„ë„ ì„¤ê³„í•©ë‹ˆë‹¤.

4ï¸âƒ£ ëª¨ë“  ê³ ê°ì˜ ìƒíƒœ ê¸°ë¡ì€ íŠ¸ë ˆì´ë„ˆ ì „ìš© ê´€ë¦¬ ì‹œìŠ¤í…œì— ëˆ„ì ë˜ì–´, ë§¤ ì„¸ì…˜ë§ˆë‹¤ ì§„í–‰ ê²½ê³¼ì™€ í†µì¦ ë³€í™”ë¥¼ ì§€ì†ì ìœ¼ë¡œ ì¶”ì Â·ê´€ë¦¬í•©ë‹ˆë‹¤.

ğŸ©¶ í”¼í‹°ì•³í™ˆì€ â€˜ë¬¸ì œê°€ ìƒê²¼ì„ ë•Œ ëŒ€ì²˜í•˜ëŠ” ê²ƒâ€™ì´ ì•„ë‹ˆë¼, ì²˜ìŒë¶€í„° ë¶€ìƒì„ ì˜ˆë°©í•˜ëŠ” ìš´ë™ ì„¤ê³„ë¥¼ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.`,
      },
    ],
    [],
  );

  const handleKakaoClick = (e: React.MouseEvent) => {
    // âœ… ì•„ì½”ë””ì–¸ í† ê¸€/ë¶€ëª¨ í´ë¦­ ê°„ì„­ ë°©ì§€
    e.preventDefault();
    e.stopPropagation();
    openExternal(KAKAO_CHAT_URL);
  };

  return (
    <section className="bg-[#FAF8F3] py-20 sm:py-28">
      <div className="mx-auto max-w-4xl px-6">
        {/* Title */}
        <div className="text-center">
          <p className="text-[12px] font-medium tracking-[0.18em] text-[#B8A89A]">
            FAQ
          </p>
          <h2 className="mt-3 text-[28px] font-semibold leading-tight text-[#1E1B16] sm:text-[36px]">
            ìì£¼ ë¬»ëŠ” ì§ˆë¬¸
          </h2>
          <p className="mt-3 text-[14px] leading-relaxed text-[#6A6052] sm:text-[15px]">
            í”¼í‹°ì•³í™ˆ ì„œë¹„ìŠ¤ì˜ ì§„í–‰ ë°©ì‹ê³¼ íŠ¹ì§•ì„ ìì„¸íˆ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
          </p>
        </div>

        {/* Accordion */}
        <div className="mt-10 overflow-hidden rounded-2xl border border-[#E7DED3] bg-white/70 shadow-[0_10px_26px_rgba(0,0,0,0.04)]">
          {faqs.map((item, i) => {
            const isOpen = open === i;

            return (
              <div
                key={i}
                className={[
                  "px-5 sm:px-7",
                  i !== 0 ? "border-t border-[#E7DED3]" : "",
                ].join(" ")}
              >
                <button
                  type="button"
                  onClick={() => setOpen(isOpen ? null : i)}
                  className="flex w-full items-center justify-between gap-4 py-5 text-left"
                  aria-expanded={isOpen}
                  aria-controls={`faq-panel-${i}`}
                >
                  <span className="text-[15px] font-semibold leading-6 text-[#2B241C] sm:text-[16px]">
                    {item.q}
                  </span>

                  <span
                    className={[
                      "flex h-9 w-9 flex-shrink-0 items-center justify-center rounded-full",
                      "border border-[#E7DED3] bg-white",
                      "transition-colors hover:bg-black/[0.02]",
                    ].join(" ")}
                    aria-hidden="true"
                  >
                    <ChevronDown
                      className={[
                        "h-4 w-4 text-[#6B5B43] transition-transform duration-300",
                        isOpen ? "rotate-180" : "",
                      ].join(" ")}
                    />
                  </span>
                </button>

                <div
                  id={`faq-panel-${i}`}
                  className={[
                    "overflow-hidden transition-[max-height,opacity] duration-500 ease-out",
                    isOpen ? "max-h-[900px] opacity-100" : "max-h-0 opacity-0",
                  ].join(" ")}
                >
                  <div className="pb-6">
                    <div className="h-px w-full bg-[#F0E9DF]" />
                    <p className="mt-4 whitespace-pre-line text-[14px] leading-7 text-[#4B4035] sm:text-[15px]">
                      {item.a}
                    </p>

                    {/* âœ… FAQ ë‚´ë¶€ CTA */}
                    <div className="mt-5 flex justify-center">
                      <button
                        type="button"
                        onClick={handleKakaoClick}
                        className={[
                          "relative z-10 pointer-events-auto",
                          "inline-flex items-center justify-center",
                          "rounded-full bg-[#CDBA97] px-7 py-3",
                          "text-sm font-semibold text-white shadow-sm",
                          "transition hover:opacity-95 active:scale-[0.99]",
                        ].join(" ")}
                      >
                        ì¹´ì¹´ì˜¤í†¡ ì±„ë„ë¡œ ë¬¸ì˜í•˜ê¸°
                      </button>
                    </div>

                    <p className="mt-3 text-center text-[12px] leading-relaxed text-[#9A8C7E]">
                      ë²„íŠ¼ í´ë¦­ ì‹œ ì¹´ì¹´ì˜¤í†¡ ì±„ë„(ìƒˆ ì°½)ë¡œ ì´ë™í•©ë‹ˆë‹¤.
                    </p>
                  </div>
                </div>
              </div>
            );
          })}
        </div>

        <p className="mt-6 text-center text-[12px] leading-relaxed text-[#9A8C7E]">
          ì¶”ê°€ ë¬¸ì˜ëŠ” í•˜ë‹¨ì˜ ì²´í—˜ìˆ˜ì—… ì‹ ì²­ ë²„íŠ¼ ë˜ëŠ” ìœ„ì˜ ì¹´ì¹´ì˜¤í†¡ ì±„ë„ ë¬¸ì˜
          ë²„íŠ¼ì„ í†µí•´ í¸í•˜ê²Œ ë‚¨ê²¨ì£¼ì„¸ìš”.
        </p>
      </div>
    </section>
  );
}
